{"file":"C:\\Projects\\Attrition\\packages\\server\\src\\__tests__\\api-consistency.performance.test.ts","mappings":"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","names":[],"sources":["C:\\Projects\\Attrition\\packages\\server\\src\\__tests__\\api-consistency.performance.test.ts"],"sourcesContent":["ï»¿/**\r\n * API Consistency Performance and Edge Case Test Suite\r\n * \r\n * Validates that consistency fixes don't negatively impact performance\r\n * and handles edge cases properly across all game routes.\r\n */\r\n\r\nimport request from 'supertest';\r\nimport { HTTP_STATUS, ERROR_MESSAGES } from '../constants/response-formats';\r\nimport { API_ENDPOINTS } from '../constants/api-endpoints';\r\n\r\n\r\n// Mock all dependencies for performance testing\r\njest.mock('../config/supabase', () => ({\r\n  supabase: {\r\n    from: jest.fn().mockImplementation(() => ({\r\n      select: jest.fn().mockReturnThis(),\r\n      insert: jest.fn().mockReturnThis(),\r\n      update: jest.fn().mockReturnThis(),\r\n      eq: jest.fn().mockReturnThis(),\r\n      single: jest.fn().mockReturnThis(),\r\n      maybeSingle: jest.fn().mockReturnThis(),\r\n      data: { id: 'test-empire-id', name: 'Test Empire' },\r\n      error: null\r\n    }))\r\n  }\r\n}));\r\n\r\njest.mock('../services/empire/EmpireResolutionService', () => ({\r\n  EmpireResolutionService: {\r\n    resolveEmpireByUserObject: jest.fn().mockResolvedValue({\r\n      id: 'test-empire-id',\r\n      name: 'Test Empire',\r\n      credits: 10000,\r\n      energy: 5000,\r\n      territories: ['A00:10:20:30']\r\n    })\r\n  }\r\n}));\r\n\r\njest.mock('../middleware/auth', () => ({\r\n  authenticate: (req: any, res: any, next: any) => {\r\n    const authHeader = req.headers.authorization;\r\n    if (authHeader === 'Bearer performance-test-token') {\r\n      req.user = { id: 'test-user-id', email: 'test@example.com' };\r\n      return next();\r\n    }\r\n    return res.status(HTTP_STATUS.UNAUTHORIZED).json({ success: false, error: ERROR_MESSAGES.AUTHENTICATION_REQUIRED });\r\n  }\r\n}));\r\n\r\ndescribe('API Consistency Performance and Edge Cases', () => {\r\n  \r\n  const PERFORMANCE_TEST_TOKEN = 'performance-test-token';\r\n  \r\n  // Routes for performance testing\r\n  const PERFORMANCE_TEST_ROUTES = [\r\n    API_ENDPOINTS.GAME.DASHBOARD,\r\n    '/api/game/empire',\r\n    '/api/game/bases',\r\n    '/api/game/structures/catalog',\r\n    '/api/game/tech/catalog',\r\n    API_ENDPOINTS.GAME.FLEETS.BASE,\r\n    '/api/game/research'\r\n  ];\r\n\r\n  describe('Response Time Consistency', () => {\r\n\r\n    it('should maintain consistent response times across routes', async () => {\r\n      const responseTimes: { route: string; time: number }[] = [];\r\n      \r\n      for (const route of PERFORMANCE_TEST_ROUTES) {\r\n        const startTime = process.hrtime.bigint();\r\n        \r\n        const response = await request(app)\r\n          .get(route)\r\n          .set('Authorization', `Bearer ${PERFORMANCE_TEST_TOKEN}`);\r\n        \r\n        const endTime = process.hrtime.bigint();\r\n        const responseTimeMs = Number(endTime - startTime) / 1_000_000; // Convert to milliseconds\r\n        \r\n        responseTimes.push({ route, time: responseTimeMs });\r\n        \r\n        // Should return successful response\r\n        expect(response.status).toBe(HTTP_STATUS.OK);\r\n        expect(response.body.success).toBe(true);\r\n      }\r\n\r\n      // Calculate statistics\r\n      const times = responseTimes.map(rt => rt.time);\r\n      const avgTime = times.reduce((sum, time) => sum + time, 0) / times.length;\r\n      const maxTime = Math.max(...times);\r\n      const minTime = Math.min(...times);\r\n      \r\n      console.log('ðŸ“Š Response Time Statistics:');\r\n      console.log(`   Average: ${avgTime.toFixed(2)}ms`);\r\n      console.log(`   Min: ${minTime.toFixed(2)}ms`);\r\n      console.log(`   Max: ${maxTime.toFixed(2)}ms`);\r\n      console.log(`   Variance: ${(maxTime - minTime).toFixed(2)}ms`);\r\n\r\n      // Performance assertions\r\n      expect(avgTime).toBeLessThan(100); // Average response should be under 100ms\r\n      expect(maxTime).toBeLessThan(500); // No single route should take more than 500ms\r\n      expect(maxTime - minTime).toBeLessThan(200); // Variance should be reasonable\r\n      \r\n      // Log individual route performance\r\n      responseTimes.forEach(rt => {\r\n        console.log(`   ${rt.route}: ${rt.time.toFixed(2)}ms`);\r\n      });\r\n    });\r\n\r\n    it('should handle concurrent requests efficiently', async () => {\r\n      const concurrentRequests = 10;\r\n      const testRoute = API_ENDPOINTS.GAME.DASHBOARD;\r\n      \r\n      const startTime = process.hrtime.bigint();\r\n      \r\n      const promises = Array(concurrentRequests).fill(0).map(() =>\r\n        request(app)\r\n          .get(testRoute)\r\n          .set('Authorization', `Bearer ${PERFORMANCE_TEST_TOKEN}`)\r\n      );\r\n      \r\n      const responses = await Promise.all(promises);\r\n      \r\n      const endTime = process.hrtime.bigint();\r\n      const totalTime = Number(endTime - startTime) / 1_000_000;\r\n      const avgTimePerRequest = totalTime / concurrentRequests;\r\n      \r\n      // All requests should succeed\r\n      responses.forEach(response => {\r\n        expect(response.status).toBe(HTTP_STATUS.OK);\r\n        expect(response.body.success).toBe(true);\r\n      });\r\n      \r\n      console.log(`ðŸ“Š Concurrent Request Performance (${concurrentRequests} requests):`);\r\n      console.log(`   Total time: ${totalTime.toFixed(2)}ms`);\r\n      console.log(`   Average per request: ${avgTimePerRequest.toFixed(2)}ms`);\r\n      \r\n      // Concurrent performance should be reasonable\r\n      expect(avgTimePerRequest).toBeLessThan(200); // Should handle concurrency well\r\n    });\r\n\r\n  });\r\n\r\n  describe('Memory Usage and Resource Management', () => {\r\n\r\n    it('should not leak memory during repeated requests', async () => {\r\n      const initialMemory = process.memoryUsage();\r\n      \r\n      // Make many requests to test for memory leaks\r\n      for (let i = 0; i < 50; i++) {\r\n        await request(app)\r\n          .get(API_ENDPOINTS.GAME.DASHBOARD)\r\n          .set('Authorization', `Bearer ${PERFORMANCE_TEST_TOKEN}`);\r\n      }\r\n      \r\n      // Force garbage collection if available\r\n      if (global.gc) {\r\n        global.gc();\r\n      }\r\n      \r\n      const finalMemory = process.memoryUsage();\r\n      \r\n      const heapGrowth = finalMemory.heapUsed - initialMemory.heapUsed;\r\n      const heapGrowthMB = heapGrowth / (1024 * 1024);\r\n      \r\n      console.log(`ðŸ“Š Memory Usage:`);\r\n      console.log(`   Initial heap: ${(initialMemory.heapUsed / 1024 / 1024).toFixed(2)}MB`);\r\n      console.log(`   Final heap: ${(finalMemory.heapUsed / 1024 / 1024).toFixed(2)}MB`);\r\n      console.log(`   Growth: ${heapGrowthMB.toFixed(2)}MB`);\r\n      \r\n      // Memory growth should be reasonable (less than 10MB for 50 requests)\r\n      expect(heapGrowthMB).toBeLessThan(10);\r\n    });\r\n\r\n  });\r\n\r\n  describe('Error Handling Edge Cases', () => {\r\n\r\n    it('should handle extremely large request bodies gracefully', async () => {\r\n      const largePayload = {\r\n        locationCoord: 'A00:10:20:30',\r\n        catalogKey: 'solar_plants',\r\n        largeData: 'x'.repeat(10000) // 10KB of data\r\n      };\r\n\r\n      const response = await request(app)\r\n        .post('/api/game/structures/start')\r\n        .set('Authorization', `Bearer ${PERFORMANCE_TEST_TOKEN}`)\r\n        .send(largePayload);\r\n\r\n      // Should handle gracefully (either accept or reject, but not crash)\r\n      expect([HTTP_STATUS.OK, HTTP_STATUS.BAD_REQUEST, 413, HTTP_STATUS.INTERNAL_SERVER_ERROR]).toContain(response.status);\r\n      expect(response.body).toHaveProperty('success');\r\n      \r\n      if (!response.body.success) {\r\n        expect(typeof response.body.error).toBe('string');\r\n      }\r\n    });\r\n\r\n    it('should handle malformed JSON payloads consistently', async () => {\r\n      const malformedPayloads = [\r\n        '{\"invalid\": json}', // Missing quotes\r\n        '{\"incomplete\": ', // Incomplete JSON\r\n        '{invalid}', // Invalid syntax\r\n        'not-json-at-all',\r\n        '{\"nested\": {\"deeply\": {\"very\": {\"much\": \"deep\"}}}}' // Valid but deeply nested\r\n      ];\r\n\r\n      for (const payload of malformedPayloads) {\r\n        const response = await request(app)\r\n          .post('/api/game/structures/start')\r\n          .set('Authorization', `Bearer ${PERFORMANCE_TEST_TOKEN}`)\r\n          .set('Content-Type', 'application/json')\r\n          .send(payload);\r\n\r\n        // Should return consistent error format for malformed JSON\r\n        expect([HTTP_STATUS.BAD_REQUEST, HTTP_STATUS.INTERNAL_SERVER_ERROR]).toContain(response.status);\r\n        expect(response.body).toHaveProperty('success', false);\r\n        expect(typeof response.body.error).toBe('string');\r\n        \r\n        console.log(`âœ… Malformed JSON handled: ${response.status} for \"${payload.substring(0, 20)}...\"`);\r\n      }\r\n    });\r\n\r\n    it('should handle special characters in parameters gracefully', async () => {\r\n      const specialCharacterTests = [\r\n        { param: 'A00:10:20:30<script>', description: 'XSS attempt' },\r\n        { param: \"A00'; DROP TABLE locations; --\", description: 'SQL injection attempt' },\r\n        { param: 'A00%00%01%02', description: 'Null bytes and control characters' },\r\n        { param: 'A00' + 'a'.repeat(1000), description: 'Extremely long parameter' },\r\n        { param: 'A00\\n\\r\\t', description: 'Newlines and tabs' },\r\n        { param: '../../etc/passwd', description: 'Path traversal attempt' }\r\n      ];\r\n\r\n      for (const test of specialCharacterTests) {\r\n        const response = await request(app)\r\n          .get(`/api/game/structures/status/${encodeURIComponent(test.param)}`)\r\n          .set('Authorization', `Bearer ${PERFORMANCE_TEST_TOKEN}`);\r\n\r\n        // Should handle gracefully without exposing internal errors\r\n        expect([HTTP_STATUS.BAD_REQUEST, HTTP_STATUS.NOT_FOUND, HTTP_STATUS.INTERNAL_SERVER_ERROR]).toContain(response.status);\r\n        expect(response.body).toHaveProperty('success', false);\r\n        expect(typeof response.body.error).toBe('string');\r\n        \r\n        // Should not expose internal system paths or technical details\r\n        expect(response.body.error).not.toContain('etc/passwd');\r\n        expect(response.body.error).not.toContain('DROP TABLE');\r\n        expect(response.body.error).not.toContain('<script>');\r\n        \r\n        console.log(`âœ… ${test.description}: Handled safely`);\r\n      }\r\n    });\r\n\r\n    it('should handle HTTP method mismatches consistently', async () => {\r\n      const methodTests = [\r\n        { method: 'POST', path: API_ENDPOINTS.GAME.DASHBOARD, expectedStatus: [HTTP_STATUS.NOT_FOUND, 405] },\r\n        { method: 'PUT', path: '/api/game/empire', expectedStatus: [HTTP_STATUS.NOT_FOUND, 405] },\r\n        { method: 'DELETE', path: '/api/game/bases', expectedStatus: [HTTP_STATUS.NOT_FOUND, 405] },\r\n        { method: 'PATCH', path: API_ENDPOINTS.GAME.FLEETS.BASE, expectedStatus: [HTTP_STATUS.NOT_FOUND, 405] }\r\n      ];\r\n\r\n      for (const test of methodTests) {\r\n        const response = await request(app)\r\n          [test.method.toLowerCase() as keyof typeof request.Test.prototype](test.path)\r\n          .set('Authorization', `Bearer ${PERFORMANCE_TEST_TOKEN}`);\r\n\r\n        expect(test.expectedStatus).toContain(response.status);\r\n        \r\n        // If it returns an error response, it should be properly formatted\r\n        if (response.body && response.body.success !== undefined) {\r\n          expect(response.body.success).toBe(false);\r\n          expect(typeof response.body.error).toBe('string');\r\n        }\r\n        \r\n        console.log(`âœ… ${test.method} ${test.path}: Returns ${response.status}`);\r\n      }\r\n    });\r\n\r\n  });\r\n\r\n  describe('Stress Testing', () => {\r\n\r\n    it('should handle rapid sequential requests without degradation', async () => {\r\n      const requestCount = 20;\r\n      const responseTimes: number[] = [];\r\n      \r\n      for (let i = 0; i < requestCount; i++) {\r\n        const startTime = Date.now();\r\n        \r\n        const response = await request(app)\r\n          .get('/api/game/empire')\r\n          .set('Authorization', `Bearer ${PERFORMANCE_TEST_TOKEN}`);\r\n        \r\n        const endTime = Date.now();\r\n        const responseTime = endTime - startTime;\r\n        responseTimes.push(responseTime);\r\n        \r\n        expect(response.status).toBe(HTTP_STATUS.OK);\r\n        expect(response.body.success).toBe(true);\r\n      }\r\n      \r\n      // Check that performance doesn't degrade over time\r\n      const firstHalf = responseTimes.slice(0, requestCount / 2);\r\n      const secondHalf = responseTimes.slice(requestCount / 2);\r\n      \r\n      const firstHalfAvg = firstHalf.reduce((sum, time) => sum + time, 0) / firstHalf.length;\r\n      const secondHalfAvg = secondHalf.reduce((sum, time) => sum + time, 0) / secondHalf.length;\r\n      \r\n      console.log(`ðŸ“Š Performance Consistency:`);\r\n      console.log(`   First half average: ${firstHalfAvg.toFixed(2)}ms`);\r\n      console.log(`   Second half average: ${secondHalfAvg.toFixed(2)}ms`);\r\n      console.log(`   Degradation: ${((secondHalfAvg - firstHalfAvg) / firstHalfAvg * 100).toFixed(1)}%`);\r\n      \r\n      // Performance should not degrade by more than 50%\r\n      expect(secondHalfAvg).toBeLessThan(firstHalfAvg * 1.5);\r\n    });\r\n\r\n  });\r\n\r\n  describe('Response Size and Structure Validation', () => {\r\n\r\n    it('should maintain consistent response sizes across similar routes', async () => {\r\n      const catalogRoutes = [\r\n        '/api/game/structures/catalog',\r\n        '/api/game/tech/catalog'\r\n      ];\r\n      \r\n      const responseSizes: { route: string; size: number }[] = [];\r\n      \r\n      for (const route of catalogRoutes) {\r\n        const response = await request(app)\r\n          .get(route)\r\n          .set('Authorization', `Bearer ${PERFORMANCE_TEST_TOKEN}`);\r\n        \r\n        const responseSize = JSON.stringify(response.body).length;\r\n        responseSizes.push({ route, size: responseSize });\r\n        \r\n        expect(response.status).toBe(HTTP_STATUS.OK);\r\n        expect(response.body.success).toBe(true);\r\n        expect(Array.isArray(response.body.data.catalog)).toBe(true);\r\n      }\r\n      \r\n      responseSizes.forEach(rs => {\r\n        console.log(`ðŸ“Š ${rs.route}: ${rs.size} bytes`);\r\n        \r\n        // Response sizes should be reasonable (not too large)\r\n        expect(rs.size).toBeLessThan(50000); // Less than 50KB\r\n        expect(rs.size).toBeGreaterThan(10); // More than 10 bytes (not empty)\r\n      });\r\n    });\r\n\r\n    it('should validate response structure depth and complexity', async () => {\r\n      const response = await request(app)\r\n        .get('/api/game/empire')\r\n        .set('Authorization', `Bearer ${PERFORMANCE_TEST_TOKEN}`);\r\n      \r\n      expect(response.status).toBe(HTTP_STATUS.OK);\r\n      expect(response.body.success).toBe(true);\r\n      \r\n      // Validate response structure isn't overly complex\r\n      const responseStr = JSON.stringify(response.body);\r\n      const maxNestingDepth = calculateMaxDepth(response.body);\r\n      \r\n      console.log(`ðŸ“Š Response Structure Analysis:`);\r\n      console.log(`   Max nesting depth: ${maxNestingDepth}`);\r\n      console.log(`   Response size: ${responseStr.length} characters`);\r\n      \r\n      // Response structure should be reasonable\r\n      expect(maxNestingDepth).toBeLessThan(10); // Not too deeply nested\r\n      expect(responseStr.length).toBeLessThan(10000); // Not too large\r\n    });\r\n\r\n  });\r\n\r\n});\r\n\r\n// Helper function to calculate maximum nesting depth of an object\r\nfunction calculateMaxDepth(obj: any, currentDepth = 0): number {\r\n  if (typeof obj !== 'object' || obj === null) {\r\n    return currentDepth;\r\n  }\r\n  \r\n  if (Array.isArray(obj)) {\r\n    return Math.max(currentDepth, ...obj.map(item => calculateMaxDepth(item, currentDepth + 1)));\r\n  }\r\n  \r\n  const depths = Object.values(obj).map(value => calculateMaxDepth(value, currentDepth + 1));\r\n  return Math.max(currentDepth, ...depths);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"version":3}