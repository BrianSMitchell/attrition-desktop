{"file":"C:\\Projects\\Attrition\\packages\\server\\src\\config\\supabase.ts","mappings":";;;;;;AAwBA,kDAGC;AA3BD,uDAAqD;AACrD,oDAA4B;AAC5B,yCAAwC;AAExC,6BAA6B;AAC7B,gBAAM,CAAC,MAAM,EAAE,CAAC;AAEhB,MAAM,WAAW,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAQ,CAAC,YAAY,CAAC,CAAC;AACvD,MAAM,kBAAkB,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAQ,CAAC,yBAAyB,CAAC,CAAC;AAE3E,IAAI,CAAC,WAAW,IAAI,CAAC,kBAAkB,EAAE,CAAC;IACxC,MAAM,IAAI,KAAK,CAAC,sEAAsE,CAAC,CAAC;AAC1F,CAAC;AAED,uEAAuE;AACvE,uEAAuE;AAC1D,QAAA,QAAQ,GAAG,IAAA,0BAAY,EAAC,WAAW,EAAE,kBAAkB,EAAE;IACpE,IAAI,EAAE;QACJ,gBAAgB,EAAE,KAAK;QACvB,cAAc,EAAE,KAAK;KACtB;CACF,CAAC,CAAC;AAEH,4CAA4C;AAC5C,SAAgB,mBAAmB,CAAC,KAAU,EAAE,SAAiB;IAC/D,OAAO,CAAC,KAAK,CAAC,yBAAyB,SAAS,GAAG,EAAE,KAAK,CAAC,CAAC;IAC5D,MAAM,IAAI,KAAK,CAAC,8BAA8B,SAAS,EAAE,CAAC,CAAC;AAC7D,CAAC","names":[],"sources":["C:\\Projects\\Attrition\\packages\\server\\src\\config\\supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\nimport dotenv from 'dotenv';\r\nimport { ENV_VARS } from '@game/shared';\r\n\r\n// Load environment variables\r\ndotenv.config();\r\n\r\nconst supabaseUrl = process.env[ENV_VARS.SUPABASE_URL];\r\nconst supabaseServiceKey = process.env[ENV_VARS.SUPABASE_SERVICE_ROLE_KEY];\r\n\r\nif (!supabaseUrl || !supabaseServiceKey) {\r\n  throw new Error('Missing Supabase environment variables. Please check your .env file.');\r\n}\r\n\r\n// Create a single Supabase client for the server with service role key\r\n// This bypasses Row Level Security and should only be used server-side\r\nexport const supabase = createClient(supabaseUrl, supabaseServiceKey, {\r\n  auth: {\r\n    autoRefreshToken: false,\r\n    persistSession: false,\r\n  },\r\n});\r\n\r\n// Helper function to handle Supabase errors\r\nexport function handleSupabaseError(error: any, operation: string): never {\r\n  console.error(`Supabase error during ${operation}:`, error);\r\n  throw new Error(`Database operation failed: ${operation}`);\r\n}\r\n\r\n// Type helper for database operations\r\nexport type DbResult<T> = {\r\n  data: T | null;\r\n  error: any | null;\r\n};\r\n"],"version":3}