{"file":"C:\\Projects\\Attrition\\packages\\server\\src\\utils\\__tests__\\runtimeEnv.test.ts","mappings":";;AAAA,8CAAkD;AAClD,yCAAwC;AAExC,QAAQ,CAAC,mBAAmB,EAAE,GAAG,EAAE;IACjC,MAAM,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC;IAE5B,UAAU,CAAC,GAAG,EAAE;QACd,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,OAAO,CAAC,GAAG,GAAG,EAAE,GAAG,OAAO,EAAE,CAAC;QAC7B,OAAO,OAAO,CAAC,GAAG,CAAC,iBAAQ,CAAC,qBAAqB,CAAC,CAAC;QACnD,OAAO,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC;IAC5B,CAAC,CAAC,CAAC;IAEH,SAAS,CAAC,GAAG,EAAE;QACb,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC;IACxB,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,iDAAiD,EAAE,GAAG,EAAE;QAC3D,MAAM,CAAC,IAAA,8BAAiB,GAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,8DAA8D,EAAE,GAAG,EAAE;QACxE,OAAO,CAAC,GAAG,CAAC,iBAAQ,CAAC,qBAAqB,CAAC,GAAG,MAAM,CAAC;QACrD,MAAM,CAAC,IAAA,8BAAiB,GAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEvC,OAAO,CAAC,GAAG,CAAC,iBAAQ,CAAC,qBAAqB,CAAC,GAAG,MAAM,CAAC;QACrD,MAAM,CAAC,IAAA,8BAAiB,GAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEvC,OAAO,CAAC,GAAG,CAAC,iBAAQ,CAAC,qBAAqB,CAAC,GAAG,KAAK,CAAC;QACpD,MAAM,CAAC,IAAA,8BAAiB,GAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACzC,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,kCAAkC,EAAE,GAAG,EAAE;QAC5C,OAAO,CAAC,GAAG,CAAC,MAAM,GAAG,MAAM,CAAC;QAC5B,MAAM,CAAC,IAAA,8BAAiB,GAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACzC,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,uCAAuC,EAAE,GAAG,EAAE;QACjD,OAAO,CAAC,GAAG,CAAC,MAAM,GAAG,MAAM,CAAC;QAC5B,OAAO,CAAC,GAAG,CAAC,iBAAQ,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC;QACtD,MAAM,CAAC,IAAA,8BAAiB,GAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACzC,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["C:\\Projects\\Attrition\\packages\\server\\src\\utils\\__tests__\\runtimeEnv.test.ts"],"sourcesContent":["import { isReverseProxySSL } from '../runtimeEnv';\r\nimport { ENV_VARS } from '@game/shared';\n\r\ndescribe('isReverseProxySSL', () => {\r\n  const OLD_ENV = process.env;\r\n\r\n  beforeEach(() => {\r\n    jest.resetModules();\r\n    process.env = { ...OLD_ENV };\r\n    delete process.env[ENV_VARS.USE_REVERSE_PROXY_SSL];\r\n    delete process.env.RENDER;\r\n  });\r\n\r\n  afterEach(() => {\r\n    process.env = OLD_ENV;\r\n  });\r\n\r\n  test('returns false by default when flags are not set', () => {\r\n    expect(isReverseProxySSL()).toBe(false);\r\n  });\r\n\r\n  test('returns true when USE_REVERSE_PROXY_SSL is true (any casing)', () => {\r\n    process.env[ENV_VARS.USE_REVERSE_PROXY_SSL] = 'true';\r\n    expect(isReverseProxySSL()).toBe(true);\r\n\r\n    process.env[ENV_VARS.USE_REVERSE_PROXY_SSL] = 'True';\r\n    expect(isReverseProxySSL()).toBe(true);\r\n\r\n    process.env[ENV_VARS.USE_REVERSE_PROXY_SSL] = 'YES';\r\n    expect(isReverseProxySSL()).toBe(true);\r\n  });\r\n\r\n  test('returns true when RENDER is true', () => {\r\n    process.env.RENDER = 'true';\r\n    expect(isReverseProxySSL()).toBe(true);\r\n  });\r\n\r\n  test('returns true when either flag is true', () => {\r\n    process.env.RENDER = 'true';\r\n    process.env[ENV_VARS.USE_REVERSE_PROXY_SSL] = 'false';\r\n    expect(isReverseProxySSL()).toBe(true);\r\n  });\r\n});"],"version":3}